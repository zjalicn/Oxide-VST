<!DOCTYPE html>
<html>
  <head>
    <style>
      body {
        background-color: #1e1e1e;
        color: white;
        font-family: "Lucida Grande", Arial, sans-serif;
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
      .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        height: 100%;
        padding: 0 20px;
        box-sizing: border-box;
        background-color: #1e1e1e;
        border-bottom: 1px solid #333;
      }
      .title {
        font-size: 24px;
        font-weight: bold;
        color: #ff6600;
        padding: 10px 0;
      }
      .preset-container {
        display: flex;
        align-items: center;
        padding: 0 20px;
      }
      .preset-label {
        margin-right: 10px;
        font-size: 14px;
      }
      .preset-dropdown {
        background-color: #000;
        color: #fff;
        border: 1px solid #fff;
        padding: 7px 12px;
        border-radius: 3px;
        font-size: 14px;
        min-width: 150px;
        outline: none;
      }
      .preset-dropdown:focus {
        border: 1px solid #fff;
        outline: none;
      }
      .save-button {
        background-color: #ff6600;
        color: white;
        border: none;
        padding: 7px 17px;
        border-radius: 3px;
        cursor: pointer;
        font-size: 14px;
        margin-left: 15px;
      }
      .save-button:hover {
        background-color: #ff8833;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <div class="title">OXIDE</div>
      <div class="preset-container">
        <div class="preset-label">Preset:</div>
        <select
          class="preset-dropdown"
          id="presetDropdown"
          onfocus="this.blur();"
        >
          <option value="default">Default</option>
          <option value="light_drive">Light Drive</option>
          <option value="heavy_metal">Heavy Metal</option>
          <option value="fuzz">Fuzz</option>
          <option value="warm_tape">Warm Tape</option>
        </select>
      </div>
      <button class="save-button" id="saveButton">Save</button>
    </div>

    <script>
      // Get references to our UI elements
      const presetDropdown = document.getElementById("presetDropdown");
      const saveButton = document.getElementById("saveButton");

      // Prevent focus on dropdown
      document.addEventListener("mousedown", function (e) {
        if (e.target.tagName === "SELECT") {
          e.preventDefault();

          // Show dropdown manually
          var event = document.createEvent("MouseEvents");
          event.initMouseEvent(
            "mousedown",
            true,
            true,
            window,
            0,
            0,
            0,
            0,
            0,
            false,
            false,
            false,
            false,
            0,
            null
          );
          e.target.dispatchEvent(event);
        }
      });

      // Handle preset selection
      presetDropdown.addEventListener("change", function () {
        const presetName = this.value;
        // Use the oxide: URL scheme to communicate with C++
        window.location.href = "oxide:preset=" + presetName;

        // Immediately blur to prevent focus issues
        this.blur();
      });

      // Handle save button click
      saveButton.addEventListener("click", function () {
        // Use the oxide: URL scheme to communicate with C++
        window.location.href = "oxide:action=save";
      });
    </script>
  </body>
</html>
